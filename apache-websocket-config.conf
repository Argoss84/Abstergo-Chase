# Configuration Apache pour Socket.io
# Nécessite les modules: proxy, proxy_http, proxy_wstunnel
# Activer avec: a2enmod proxy proxy_http proxy_wstunnel

<VirtualHost *:443>
    ServerName abstergochase.fr

    # Configuration SSL
    SSLEngine on
    SSLCertificateFile /path/to/your/certificate.crt
    SSLCertificateKeyFile /path/to/your/private.key

    # Configuration Socket.io
    ProxyPreserveHost On

    # Socket.io Tunnel vers votre serveur Node.js
    ProxyPass /socket.io/ ws://localhost:5174/socket.io/
    ProxyPassReverse /socket.io/ ws://localhost:5174/socket.io/

    # Timeouts pour Socket.io
    ProxyTimeout 86400

    # Headers
    RequestHeader set X-Forwarded-Proto "https"
    RequestHeader set X-Forwarded-Port "443"
</VirtualHost>

# Alternative avec une route spécifique pour Socket.io
<VirtualHost *:443>
    ServerName abstergochase.fr

    SSLEngine on
    SSLCertificateFile /path/to/your/certificate.crt
    SSLCertificateKeyFile /path/to/your/private.key

    # Route Socket.io spécifique
    ProxyPass /ws/ ws://localhost:5174/ws/
    ProxyPassReverse /ws/ ws://localhost:5174/ws/

    # Si vous utilisez cette config, définissez :
    # VITE_SOCKET_IO_PATH=/ws
</VirtualHost>
