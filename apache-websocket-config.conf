# Configuration Apache pour WebSocket
# Nécessite les modules: proxy, proxy_http, proxy_wstunnel
# Activer avec: a2enmod proxy proxy_http proxy_wstunnel

<VirtualHost *:443>
    ServerName abstergochase.fr
    
    # Configuration SSL
    SSLEngine on
    SSLCertificateFile /path/to/your/certificate.crt
    SSLCertificateKeyFile /path/to/your/private.key
    
    # Configuration WebSocket
    ProxyPreserveHost On
    
    # WebSocket Tunnel vers votre serveur Node.js
    ProxyPass / ws://localhost:5174/
    ProxyPassReverse / ws://localhost:5174/
    
    # Timeouts pour WebSocket
    ProxyTimeout 86400
    
    # Headers
    RequestHeader set X-Forwarded-Proto "https"
    RequestHeader set X-Forwarded-Port "443"
</VirtualHost>

# Alternative avec une route spécifique pour WebSocket
<VirtualHost *:443>
    ServerName abstergochase.fr
    
    SSLEngine on
    SSLCertificateFile /path/to/your/certificate.crt
    SSLCertificateKeyFile /path/to/your/private.key
    
    # Route WebSocket spécifique
    ProxyPass /ws ws://localhost:5174/
    ProxyPassReverse /ws ws://localhost:5174/
    
    # Si vous utilisez cette config, le client doit se connecter à:
    # wss://abstergochase.fr/ws
</VirtualHost>
